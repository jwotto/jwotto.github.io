<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Puzzel Ontwerper</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .notemove {transition: bottom 0.14s cubic-bezier(.4,.2,.4,1), background 0.12s;}
    .notenstok {position: absolute; width: 4px; background: black; top: 50%; z-index: 20; transition: transform 0.12s;}
    .notenletter {position: relative; z-index: 22; font-weight: bold; color: white; text-align: center; width: 100%; line-height: 20px; font-size: 13px; pointer-events: none; user-select: none;}
    .toolbar-btn svg text, .toolbar-btn svg rect, .toolbar-btn svg circle {transition: fill 0.15s, stroke 0.15s;}
    .notenbalk-svg {position: absolute; left: 0; top: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;}
    .notenblokkie {background: transparent; border-radius: 0.5rem; z-index: 2;}
    .input-onstaff {width: 56px; height: 32px; border-radius: 0.5rem; font-size: 1rem; border: 2px solid #d1d5db; margin-top: 2px; margin-bottom: 2px; text-align: center; background: white; color: black; outline: none; font-weight: normal; transition: border .15s, font-weight .15s; position: relative; z-index: 10; display: block;}
    .input-onstaff.filled {border-color: #000; font-weight: bold;}
    .border-blue-500 {border-color: #3b82f6 !important; border-width: 4px !important;}
    .omdraai-icoon {display: flex; justify-content: center; align-items: center; min-height: 28px; width: 100%; margin: 4px 0;}
    .omdraai-placeholder {min-height: 28px; height: 28px; width: 28px; display: inline-block;}
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-2 sm:p-6">

  <!-- NAAM EN TOONSOORT NAAST ELKAAR -->
  <div class="w-full max-w-5xl flex flex-col sm:flex-row gap-4 mb-4">
    <div class="flex-1">
      <label for="puzzleNameInput" class="block mb-1 font-semibold">Naam van de puzzel</label>
      <input id="puzzleNameInput" type="text" placeholder="Puzzelnaam" class="border border-gray-300 px-3 py-2 rounded w-full text-lg" maxlength="40" />
    </div>
    <div class="flex-1">
      <label for="puzzleKeyInput" class="block mb-1 font-semibold">Toonsoort</label>
      <select id="puzzleKeyInput" class="border border-gray-300 px-3 py-2 rounded w-full text-lg">
        <option value="C">C</option>
        <option value="D">D</option>
        <option value="F">F</option>
        <option value="G">G</option>
        <option value="Bb">Bb</option>
        <option value="Eb">Eb</option>
      </select>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="flex flex-wrap gap-2 mt-6 mb-4 w-full max-w-5xl items-start">
    <h1 class="text-2xl font-semibold flex-1 min-w-[200px]">Puzzel Ontwerper</h1>
    <div class="flex flex-wrap gap-2">
      <button aria-label="Selecteer hand" title="Selecteer hand" onclick="selectTool('hand')" id="btn-hand" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-xl font-semibold">üñêÔ∏è</button>
      <button aria-label="Cirkel plaatsen" title="Cirkel plaatsen" onclick="selectTool('circle')" id="btn-circle" class="toolbar-btn w-10 h-10 bg-blue-600 text-white border border-gray-400 rounded flex items-center justify-center text-lg font-semibold">
        <svg width="22" height="22"><circle cx="11" cy="11" r="8" stroke="black" stroke-width="2" fill="none"/></svg>
      </button>
      <button aria-label="Vierkant plaatsen" title="Vierkant plaatsen" onclick="selectTool('square')" id="btn-square" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-lg font-semibold">
        <svg width="22" height="22"><rect x="5" y="5" width="12" height="12" stroke="black" stroke-width="2" fill="none"/></svg>
      </button>
      <button aria-label="Kruis plaatsen (‚ôØ)" title="Kruis plaatsen (‚ôØ)" onclick="selectTool('sharp')" id="btn-sharp" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-lg font-semibold">
        <span class="block w-8 h-8 sm:w-11 sm:h-11">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -16 16 64" class="w-full h-full">
            <line x1="5" y1="0" x2="5" y2="32" stroke="black" stroke-width="2"/>
            <line x1="11" y1="0" x2="11" y2="32" stroke="black" stroke-width="2"/>
            <line x1="0" y1="10" x2="16" y2="6" stroke="black" stroke-width="2"/>
            <line x1="0" y1="22" x2="16" y2="18" stroke="black" stroke-width="2"/>
          </svg>
        </span>
      </button>
      <button aria-label="Mol plaatsen (‚ô≠)" title="Mol plaatsen (‚ô≠)" onclick="selectTool('flat')" id="btn-flat" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-lg font-semibold">
        <span class="block w-8 h-8 sm:w-11 sm:h-11">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -10 16 48" class="w-full h-full">
            <line x1="8" y1="0" x2="8" y2="28" stroke="black" stroke-width="2"/>
            <path d="M8 14 Q20 17 8 28" fill="none" stroke="black" stroke-width="2"/>
          </svg>
        </span>
      </button>
      <button aria-label="Herstellingsteken plaatsen (‚ôÆ)" title="Herstellingsteken plaatsen (‚ôÆ)" onclick="selectTool('natural')" id="btn-natural" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-lg font-semibold">
        <span class="block w-8 h-8 sm:w-11 sm:h-11">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -9 20 48" class="w-full h-full">
            <path d="M14 30V6M14 22L6 26V2M6 10L14 6" stroke="black" stroke-width="2" fill="none"/>
          </svg>
        </span>
      </button>
      <button aria-label="Leegmaken" title="Leegmaken" onclick="clearNoteBlock()" id="btn-clear" class="toolbar-btn w-10 h-10 bg-white text-black border border-gray-400 rounded flex items-center justify-center text-2xl font-bold">
        <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
          <circle cx="11" cy="11" r="8" stroke="black" stroke-width="2"/>
          <line x1="7" y1="15" x2="15" y2="7" stroke="black" stroke-width="2"/>
        </svg>
      </button>
      <button aria-label="Nieuw tekstvak toevoegen" title="Nieuw tekstvak toevoegen" onclick="addTextbox()" class="w-10 h-10 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center justify-center text-lg font-semibold">+</button>
      <button aria-label="Naar links verplaatsen" title="Naar links verplaatsen" onclick="moveSelected(-1)" class="w-10 h-10 bg-gray-600 text-white rounded hover:bg-gray-700 flex items-center justify-center text-lg font-semibold">‚Üê</button>
      <button aria-label="Naar rechts verplaatsen" title="Naar rechts verplaatsen" onclick="moveSelected(1)" class="w-10 h-10 bg-gray-600 text-white rounded hover:bg-gray-700 flex items-center justify-center text-lg font-semibold">‚Üí</button>
      <button aria-label="Verwijder geselecteerd vak" title="Verwijder geselecteerd vak" onclick="removeSelected()" class="w-10 h-10 bg-red-500 text-white rounded hover:bg-red-600 flex items-center justify-center text-lg font-semibold">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <rect x="5" y="8" width="10" height="7" rx="2" stroke="white" stroke-width="2"/>
          <path d="M8 8V6a2 2 0 0 1 2-2v0a2 2 0 0 1 2 2v2" stroke="white" stroke-width="2"/>
          <line x1="7" y1="8" x2="13" y2="8" stroke="white" stroke-width="2"/>
        </svg>
      </button>
    </div>
  </div>

  <div id="scrollWrapper" class="w-full max-w-5xl overflow-x-auto mb-8 border rounded shadow bg-white" style="position:relative;">
    <div id="container" class="flex min-w-fit relative z-10"></div>
  </div>

  <div class="w-full max-w-5xl mb-4">
    <label for="puzzleAnswerInput" class="block mb-1 font-semibold">Oplossing van de puzzel</label>
    <input id="puzzleAnswerInput" type="text" placeholder="Oplossing (antwoord)" class="border border-gray-300 px-3 py-2 rounded w-full text-lg" maxlength="80" />
  </div>
  <div class="w-full max-w-5xl mb-4">
    <label for="puzzleTipInput" class="block mb-1 font-semibold">Tip voor de puzzel</label>
    <textarea id="puzzleTipInput" rows="" placeholder="Tip voor de puzzel" class="border border-gray-300 px-3 py-2 rounded w-full text-lg resize-none" maxlength="200"></textarea>
  </div>
  <div class="w-full max-w-5xl mb-4">
    <label for="puzzleLevelInput" class="block mb-1 font-semibold">Niveau</label>
    <select id="puzzleLevelInput" class="border border-gray-300 px-3 py-2 rounded w-full text-lg">
      <option value="level1">Level 1</option>
      <option value="level2">Level 2</option>
      <option value="level3">Level 3</option>
    </select>
  </div>
  <div class="w-full max-w-5xl flex flex-wrap gap-2 mb-8 items-center">
    <button onclick="downloadJSON()" class="px-4 py-2 rounded bg-blue-500 text-white hover:bg-blue-600">Opslaan</button>
    <label class="px-4 py-2 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 cursor-pointer">
      Laden
      <input type="file" accept=".json" onchange="loadJSONFile(this)" style="display:none;">
    </label>
  </div>

  <script src="main.js"></script>
</body>
</html>
